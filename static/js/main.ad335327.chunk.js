(this["webpackJsonpgets-chatbot"]=this["webpackJsonpgets-chatbot"]||[]).push([[0],{47:function(e,t,a){},49:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),s=a.n(r),c=a(10),i=a.n(c),o=a(4),l=a(6),u=a(32),d=a(17),b=a(2),p=a(7),h=a.n(p),j="INPUT_SUCCESS",f="INPUT_FAIL",m="MESSAGE_SUCCESS",O="MESSAGE_FAIL",g="SET_IFRAME_URL",v="SET_IFRAME_LOADING",y="BOT_MESSAGE_LOADING",x={messages:[{response:{message:"Hi, I am Gail! I'm here to help you."},time:h()().format("LT"),type:"bot"},{response:{message:"We are a community marketplace offering a wide variety of products and services from our trusted vendors and partners."},time:h()().format("LT"),type:"bot"}]},w={iframeUrl:"",loading:!0},N=Object(l.combineReducers)({chatbot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,r=e.messages;switch(a){case y:return Object(b.a)(Object(b.a)({},e),{},{botMsgLoading:!0});case j:return r=[].concat(Object(d.a)(r),[{response:{message:n},time:h()().format("LT"),type:"user"}]),Object(b.a)(Object(b.a)({},e),{},{messages:r});case f:return Object(b.a)({},e);case m:return r=[].concat(Object(d.a)(r),[{response:n,time:h()().format("LT"),type:"bot"}]),Object(b.a)(Object(b.a)({},e),{},{messages:r,botMsgLoading:!1});case O:return r=[].concat(Object(d.a)(r),[{response:{message:"Something doesn't seem right. Please try again."},type:"bot"}]),Object(b.a)(Object(b.a)({},e),{},{messages:r,botMsgLoading:!1});default:return Object(b.a)({},e)}},iframe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case g:return Object(b.a)(Object(b.a)({},e),{},{iframeUrl:n});case v:return Object(b.a)(Object(b.a)({},e),{},{loading:n});default:return Object(b.a)({},e)}}}),C=a(33),k=[u.a],S=Object(l.createStore)(N,{},Object(C.composeWithDevTools)(l.applyMiddleware.apply(void 0,k))),I=(a(47),a(5)),E=a.n(I),L=a(8),M=a(22);function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var _=r.createElement("path",{d:"m8.75 17.612v4.638c0 .324.208.611.516.713.077.025.156.037.234.037.234 0 .46-.11.604-.306l2.713-3.692z"}),T=r.createElement("path",{d:"m23.685.139c-.23-.163-.532-.185-.782-.054l-22.5 11.75c-.266.139-.423.423-.401.722.023.3.222.556.505.653l6.255 2.138 13.321-11.39-10.308 12.419 10.483 3.583c.078.026.16.04.242.04.136 0 .271-.037.39-.109.19-.116.319-.311.352-.53l2.75-18.5c.041-.28-.077-.558-.307-.722z"});function B(e,t){var a=e.title,n=e.titleId,s=A(e,["title","titleId"]);return r.createElement("svg",U({enableBackground:"new 0 0 24 24",height:512,viewBox:"0 0 24 24",width:512,ref:t,"aria-labelledby":n},s),a?r.createElement("title",{id:n},a):null,_,T)}var P=r.forwardRef(B);a.p;function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function F(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var z=r.createElement("path",{fill:"currentColor",d:"M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"});function G(e,t){var a=e.title,n=e.titleId,s=F(e,["title","titleId"]);return r.createElement("svg",R({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"ellipsis-h",className:"svg-inline--fa fa-ellipsis-h fa-w-16",role:"img",viewBox:"0 0 512 512",ref:t,"aria-labelledby":n},s),a?r.createElement("title",{id:n},a):null,z)}var D=r.forwardRef(G),W=(a.p,a(12)),Y=a(13),H=a(14),J=a(16),X=a(15),K=function(e){return{type:g,payload:e}},q=function(e){return{type:v,payload:e}},Q=function(e){Object(J.a)(a,e);var t=Object(X.a)(a);function a(){return Object(W.a)(this,a),t.apply(this,arguments)}return Object(Y.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,r=t.setIframeUrl,s=t.setIframeLoading;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("section",{children:a.map((function(t){return Object(n.jsxs)("div",{className:"chat-card",id:"card",style:e.props.cardStyle,tabIndex:"0",role:"button","aria-pressed":"false",onClick:function(){s(!0),r(t.attachmentLinkUrl)},children:[Object(n.jsx)("img",{src:t.imageUrl,alt:t.title}),Object(n.jsxs)("div",{className:"footer",children:[Object(n.jsx)("span",{className:"title",children:t.title}),Object(n.jsx)("span",{className:"subtitle",children:t.subTitle}),Object(n.jsx)("button",{children:"Buy Now"})]})]},t.imageUrl)}))})})}}]),a}(s.a.Component),V=Object(o.b)(null,(function(e){return{setIframeUrl:function(t){return e(K(t))},setIframeLoading:function(t){return e(q(t))}}}))(Q),Z=function(e){Object(J.a)(a,e);var t=Object(X.a)(a);function a(e){var n;return Object(W.a)(this,a),(n=t.call(this,e)).state={currentCard:0,position:0,cardStyle:{transform:"translateX(0px)"},width:0},n.handleClick=n.handleClick.bind(Object(H.a)(n)),n}return Object(Y.a)(a,[{key:"componentDidMount",value:function(){var e=document.getElementById("card").clientWidth;this.setState({width:e})}},{key:"handleClick",value:function(e){var t=window.getComputedStyle(document.getElementById("card")).marginRight;t=JSON.parse(t.replace(/px/i,""));var a=this.state.width,n=t,r=this.props.data.length,s=this.state.currentCard,c=this.state.position;"next"===e&&s<r-1?(s++,c-=a+n):"prev"===e&&s>0&&(s--,c+=a+n),this.setCard(s,c,r)}},{key:"setCard",value:function(e,t,a){this.setState({currentCard:e,position:t,cardStyle:{transform:"translateX(".concat(t,"px)")}})}},{key:"render",value:function(){var e=this,t=this.props.data;return Object(n.jsxs)("div",{className:"chat-cards-slider",children:[t.length>1&&Object(n.jsxs)("div",{className:"slider-btns",children:[Object(n.jsx)("button",{className:"chat-slider-btn btn-l",onClick:function(){return e.handleClick("prev")},children:Object(n.jsx)("i",{className:"fa fa-chevron-left","aria-hidden":"true"})}),Object(n.jsx)("button",{className:"chat-slider-btn btn-r",onClick:function(){return e.handleClick("next")},children:Object(n.jsx)("i",{className:"fa fa-chevron-right","aria-hidden":"true"})})]}),Object(n.jsx)(V,{data:t,cardStyle:this.state.cardStyle})]})}}]),a}(s.a.Component),$=function(e){var t=e.chat,a=e.handleBotButton;return Object(n.jsx)(n.Fragment,{children:t.messages&&t.messages.length?t.messages.map((function(e,r){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("div",{className:"chat-wrapper",children:[Object(n.jsxs)("div",{className:"msg-icon-n-text-".concat(e.type),children:["bot"===e.type&&Object(n.jsx)("span",{className:"chat-user-icon"}),Object(n.jsxs)("div",{className:"chat-bubble-".concat(e.type),children:["bot"===e.type?Object(n.jsx)("span",{dangerouslySetInnerHTML:{__html:e.response.message}}):Object(n.jsx)("span",{children:e.response.message}),Object(n.jsx)("div",{className:"msg-time",children:e.time})]}),"user"===e.type&&Object(n.jsx)("span",{className:"chat-user-icon"})]}),Object(n.jsx)("div",{className:"btn-wrapper",children:e.response.responseCard&&e.response.responseCard.genericAttachments&&e.response.responseCard.genericAttachments[0].buttons&&e.response.responseCard.genericAttachments[0].buttons.map((function(e,t){return Object(n.jsx)("button",{className:"chat-btn",onClick:function(){return a(e)},children:e.text},"".concat(e.value,"_").concat(t))}))}),e.response.responseCard&&e.response.responseCard.genericAttachments&&!e.response.responseCard.genericAttachments[0].buttons&&Object(n.jsx)(Z,{data:e.response.responseCard.genericAttachments})]}),r===t.messages.length-1&&t.botMsgLoading&&Object(n.jsx)("div",{className:"chat-wrapper",children:Object(n.jsxs)("div",{className:"msg-icon-n-text-bot",children:[Object(n.jsx)("span",{className:"chat-user-icon"}),Object(n.jsx)("div",{className:"chat-bubble-bot chat-typing",children:Object(n.jsx)(D,{})})]})})]},"chat_".concat(r))})):""})},ee=(a(49),a(34)),te=a.n(ee),ae=Object(o.b)((function(e){return{chat:e.chatbot}}),{userMessage:function(e){return function(){var t=Object(L.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:j,payload:e})}catch(n){a({type:f})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},botMessage:function(e){return function(){var t=Object(L.a)(E.a.mark((function t(a){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:y}),"https://d7se6vu2fb.execute-api.ap-northeast-1.amazonaws.com/stage1/chat",t.prev=2,n={text:e},t.next=6,te.a.post("".concat("https://d7se6vu2fb.execute-api.ap-northeast-1.amazonaws.com/stage1/chat"),n,{headers:{"Content-Type":"application/json"}});case 6:r=t.sent,a({type:m,payload:r.data}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.error("ERROR:",t.t0),a({type:O});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.chat,a=e.userMessage,s=e.botMessage,c=Object(r.useState)(""),i=Object(M.a)(c,2),o=i[0],l=i[1],u=Object(r.useState)(!1),d=Object(M.a)(u,2),b=d[0],p=d[1],j=Object(r.useRef)(null);Object(r.useEffect)((function(){if(b){var e=j.current;e.scrollTop=e.scrollHeight}}),[t,b]),Object(r.useEffect)((function(){s("what can you do")}),[]);var f=function(){var e=Object(L.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&(a(o),s(o),l(""));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(L.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:13===(t.keyCode||t.which)&&f();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(n.Fragment,{children:[b&&Object(n.jsxs)("div",{className:"chat-container",children:[Object(n.jsx)("button",{className:"close-bot",onClick:function(){return p(!1)},children:"\xd7"}),Object(n.jsxs)("div",{ref:j,className:"chat-body",children:[Object(n.jsx)("span",{className:"chat-start",children:h()().format("MMM Do, YYYY")}),Object(n.jsx)($,{chat:t,handleBotButton:function(e){a(e.text),s(e.value)}})]}),Object(n.jsxs)("div",{className:"chat-footer",children:[Object(n.jsx)("input",{id:"chatBox",className:"input",onChange:function(e){return l(e.target.value)},onKeyPress:m,value:o,placeholder:"Type a message...",autoComplete:"off"}),Object(n.jsx)("button",{className:"chat-send-btn",onClick:f,children:Object(n.jsx)(P,{})}),Object(n.jsxs)("div",{className:"chat-tag",children:["Created by"," ",Object(n.jsxs)("a",{target:"_blank",rel:"noreferrer",href:"https://www.srijan.net/",className:"srijan-link",children:[" ","Srijan"]}),", Powered by AWS"]})]})]}),Object(n.jsx)("button",{className:"open-chatbot",onClick:function(){return p(!0)},children:Object(n.jsx)(D,{})})]})})),ne=(a(67),Object(o.b)((function(e){return{iframeLoading:e.iframe.loading}}),(function(e){return{setIframeUrl:function(t){return e(K(t))},setIframeLoading:function(t){return e(q(t))}}}))((function(e){var t=e.href,a=e.iframeLoading,r=e.setIframeLoading,s=e.setIframeUrl;return Object(n.jsxs)("div",{className:"wrapper",children:[Object(n.jsxs)("div",{className:"iframe",children:[a&&Object(n.jsx)("span",{className:"iframe-loading",children:"Loading..."}),Object(n.jsx)("iframe",{onLoad:function(){return r(!1)},style:{width:"100%",height:"100%"},target:"_parent",src:t,title:"Gets Marketplace"})]}),Object(n.jsx)("button",{className:"close-iframe",onClick:function(){return s("")},children:"\xd7"})]})}))),re=Object(o.b)((function(e){return{iframeUrl:e.iframe.iframeUrl}}))((function(e){var t=e.iframeUrl;return Object(n.jsxs)("div",{className:"chatbot-wrapper",children:[Object(n.jsx)(ae,{}),t&&Object(n.jsx)(ne,{href:t})]})}));i.a.render(Object(n.jsx)(o.a,{store:S,children:Object(n.jsx)(re,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.ad335327.chunk.js.map