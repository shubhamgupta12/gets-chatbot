(this["webpackJsonpgets-chatbot"]=this["webpackJsonpgets-chatbot"]||[]).push([[0],{47:function(e,t,n){},49:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),s=n(10),i=n.n(s),o=n(4),l=n(6),u=n(32),d=n(2),p=n(17),b=n(7),h=n.n(b),f="INPUT_SUCCESS",j="INPUT_FAIL",m="MESSAGE_SUCCESS",O="MESSAGE_FAIL",v="SET_IFRAME_URL",g="SET_IFRAME_LOADING",y={messages:[{response:{message:"Hi, I am Gail! I'm here to help you."},time:h()().format("LT"),type:"bot"},{response:{message:"We are a community marketplace offering a wide variety of products and services from our trusted vendors and partners."},time:h()().format("LT"),type:"bot"}]},x={iframeUrl:"",loading:!0},w=Object(l.combineReducers)({chatbot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=e.messages;switch(n){case f:return r=[].concat(Object(p.a)(r),[{response:{message:a},time:h()().format("LT"),type:"user"}]),Object(d.a)(Object(d.a)({},e),{},{messages:r});case j:return Object(d.a)({},e);case m:return r=[].concat(Object(p.a)(r),[{response:a,time:h()().format("LT"),type:"bot"}]),Object(d.a)(Object(d.a)({},e),{},{messages:r});case O:return r=[].concat(Object(p.a)(r),[{response:{message:"Something doesn't seem right. Please try again."},type:"bot"}]),Object(d.a)(Object(d.a)({},e),{},{messages:r});default:return Object(d.a)({},e)}},iframe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case v:return Object(d.a)(Object(d.a)({},e),{},{iframeUrl:a});case g:return Object(d.a)(Object(d.a)({},e),{},{loading:a});default:return Object(d.a)({},e)}}}),C=n(33),N=[u.a],k=Object(l.createStore)(w,{},Object(C.composeWithDevTools)(l.applyMiddleware.apply(void 0,N))),S=(n(47),n(5)),I=n.n(S),E=n(8),L=n(22);function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function M(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var A=r.createElement("path",{d:"m8.75 17.612v4.638c0 .324.208.611.516.713.077.025.156.037.234.037.234 0 .46-.11.604-.306l2.713-3.692z"}),T=r.createElement("path",{d:"m23.685.139c-.23-.163-.532-.185-.782-.054l-22.5 11.75c-.266.139-.423.423-.401.722.023.3.222.556.505.653l6.255 2.138 13.321-11.39-10.308 12.419 10.483 3.583c.078.026.16.04.242.04.136 0 .271-.037.39-.109.19-.116.319-.311.352-.53l2.75-18.5c.041-.28-.077-.558-.307-.722z"});function _(e,t){var n=e.title,a=e.titleId,c=M(e,["title","titleId"]);return r.createElement("svg",U({enableBackground:"new 0 0 24 24",height:512,viewBox:"0 0 24 24",width:512,ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,A,T)}var B=r.forwardRef(_);n.p;function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var z=r.createElement("path",{fill:"currentColor",d:"M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"});function F(e,t){var n=e.title,a=e.titleId,c=R(e,["title","titleId"]);return r.createElement("svg",P({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"ellipsis-h",className:"svg-inline--fa fa-ellipsis-h fa-w-16",role:"img",viewBox:"0 0 512 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,z)}var G=r.forwardRef(F),D=(n.p,n(12)),W=n(13),Y=n(14),H=n(16),J=n(15),X=function(e){return{type:v,payload:e}},K=function(e){return{type:g,payload:e}},q=function(e){Object(H.a)(n,e);var t=Object(J.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.setIframeUrl,c=t.setIframeLoading;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("section",{children:n.map((function(t){return Object(a.jsxs)("div",{className:"chat-card",id:"card",style:e.props.cardStyle,tabIndex:"0",role:"button","aria-pressed":"false",onClick:function(){c(!0),r(t.attachmentLinkUrl)},children:[Object(a.jsx)("img",{src:t.imageUrl,alt:t.title}),Object(a.jsxs)("div",{className:"footer",children:[Object(a.jsx)("span",{className:"title",children:t.title}),Object(a.jsx)("span",{className:"subtitle",children:t.subTitle}),Object(a.jsx)("button",{children:"Buy Now"})]})]},t.imageUrl)}))})})}}]),n}(c.a.Component),Q=Object(o.b)(null,(function(e){return{setIframeUrl:function(t){return e(X(t))},setIframeLoading:function(t){return e(K(t))}}}))(q),V=function(e){Object(H.a)(n,e);var t=Object(J.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).state={currentCard:0,position:0,cardStyle:{transform:"translateX(0px)"},width:0},a.handleClick=a.handleClick.bind(Object(Y.a)(a)),a}return Object(W.a)(n,[{key:"componentDidMount",value:function(){var e=document.getElementById("card").clientWidth;this.setState({width:e})}},{key:"handleClick",value:function(e){var t=window.getComputedStyle(document.getElementById("card")).marginRight;t=JSON.parse(t.replace(/px/i,""));var n=this.state.width,a=t,r=this.props.data.length,c=this.state.currentCard,s=this.state.position;"next"===e&&c<r-1?(c++,s-=n+a):"prev"===e&&c>0&&(c--,s+=n+a),this.setCard(c,s,r)}},{key:"setCard",value:function(e,t,n){this.setState({currentCard:e,position:t,cardStyle:{transform:"translateX(".concat(t,"px)")}})}},{key:"render",value:function(){var e=this,t=this.props.data;return Object(a.jsxs)("div",{className:"chat-cards-slider",children:[t.length>1&&Object(a.jsxs)("div",{className:"slider-btns",children:[Object(a.jsx)("button",{className:"chat-slider-btn btn-l",onClick:function(){return e.handleClick("prev")},children:Object(a.jsx)("i",{className:"fa fa-chevron-left","aria-hidden":"true"})}),Object(a.jsx)("button",{className:"chat-slider-btn btn-r",onClick:function(){return e.handleClick("next")},children:Object(a.jsx)("i",{className:"fa fa-chevron-right","aria-hidden":"true"})})]}),Object(a.jsx)(Q,{data:t,cardStyle:this.state.cardStyle})]})}}]),n}(c.a.Component),Z=function(e){var t=e.chat,n=e.handleBotButton;return Object(a.jsx)(a.Fragment,{children:t&&t.length?t.map((function(e,t){return Object(a.jsxs)("div",{className:"chat-wrapper",children:[Object(a.jsxs)("div",{className:"msg-icon-n-text-".concat(e.type),children:["bot"===e.type&&Object(a.jsx)("span",{className:"chat-user-icon"}),Object(a.jsxs)("div",{className:"chat-bubble-".concat(e.type),children:["bot"===e.type?Object(a.jsx)("span",{dangerouslySetInnerHTML:{__html:e.response.message}}):Object(a.jsx)("span",{children:e.response.message}),Object(a.jsx)("div",{className:"msg-time",children:e.time})]}),"user"===e.type&&Object(a.jsx)("span",{className:"chat-user-icon"})]}),Object(a.jsx)("div",{className:"btn-wrapper",children:e.response.responseCard&&e.response.responseCard.genericAttachments&&e.response.responseCard.genericAttachments[0].buttons&&e.response.responseCard.genericAttachments[0].buttons.map((function(e,t){return Object(a.jsx)("button",{className:"chat-btn",onClick:function(){return n(e)},children:e.text},"".concat(e.value,"_").concat(t))}))}),e.response.responseCard&&e.response.responseCard.genericAttachments&&!e.response.responseCard.genericAttachments[0].buttons&&Object(a.jsx)(V,{data:e.response.responseCard.genericAttachments})]},"chat_".concat(t))})):""})},$=(n(49),n(34)),ee=n.n($),te=Object(o.b)((function(e){return{chat:e.chatbot.messages}}),{userMessage:function(e){return function(){var t=Object(E.a)(I.a.mark((function t(n){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n({type:f,payload:e})}catch(a){n({type:j})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},sendMessage:function(e){return function(){var t=Object(E.a)(I.a.mark((function t(n){var a,r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://d7se6vu2fb.execute-api.ap-northeast-1.amazonaws.com/stage1/chat",t.prev=1,a={text:e},t.next=5,ee.a.post("".concat("https://d7se6vu2fb.execute-api.ap-northeast-1.amazonaws.com/stage1/chat"),a,{headers:{"Content-Type":"application/json"}});case 5:r=t.sent,n({type:m,payload:r.data}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error("ERROR:",t.t0),n({type:O});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.chat,n=e.userMessage,c=e.sendMessage,s=Object(r.useState)(""),i=Object(L.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)(!1),d=Object(L.a)(u,2),p=d[0],b=d[1],f=Object(r.useRef)(null);Object(r.useEffect)((function(){if(p){var e=f.current;e.scrollTop=e.scrollHeight}}),[t,p]),Object(r.useEffect)((function(){c("what can you do")}),[]);var j=function(){var e=Object(E.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&(n(o),c(o),l(""));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(E.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:13===(t.keyCode||t.which)&&j();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[p&&Object(a.jsxs)("div",{className:"chat-container",children:[Object(a.jsx)("button",{className:"close-bot",onClick:function(){return b(!1)},children:"\xd7"}),Object(a.jsxs)("div",{ref:f,className:"chat-body",children:[Object(a.jsx)("span",{className:"chat-start",children:h()().format("MMM Do, YYYY")}),Object(a.jsx)(Z,{chat:t,handleBotButton:function(e){n(e.text),c(e.value)}})]}),Object(a.jsxs)("div",{className:"chat-footer",children:[Object(a.jsx)("input",{id:"chatBox",className:"input",onChange:function(e){return l(e.target.value)},onKeyPress:m,value:o,placeholder:"Type a message...",autoComplete:"off"}),Object(a.jsx)("button",{className:"chat-send-btn",onClick:j,children:Object(a.jsx)(B,{})}),Object(a.jsxs)("div",{className:"chat-tag",children:["Created by"," ",Object(a.jsxs)("a",{target:"_blank",rel:"noreferrer",href:"https://www.srijan.net/",className:"srijan-link",children:[" ","Srijan"]}),", Powered by AWS"]})]})]}),Object(a.jsx)("button",{className:"open-chatbot",onClick:function(){return b(!0)},children:Object(a.jsx)(G,{})})]})})),ne=(n(67),Object(o.b)((function(e){return{iframeLoading:e.iframe.loading}}),(function(e){return{setIframeUrl:function(t){return e(X(t))},setIframeLoading:function(t){return e(K(t))}}}))((function(e){var t=e.href,n=e.iframeLoading,r=e.setIframeLoading,c=e.setIframeUrl;return Object(a.jsxs)("div",{className:"wrapper",children:[Object(a.jsxs)("div",{className:"iframe",children:[n&&Object(a.jsx)("span",{className:"iframe-loading",children:"Loading..."}),Object(a.jsx)("iframe",{onLoad:function(){return r(!1)},style:{width:"100%",height:"100%"},target:"_parent",src:t,title:"Gets Marketplace"})]}),Object(a.jsx)("button",{className:"close-iframe",onClick:function(){return c("")},children:"\xd7"})]})}))),ae=Object(o.b)((function(e){return{iframeUrl:e.iframe.iframeUrl}}))((function(e){var t=e.iframeUrl;return Object(a.jsxs)("div",{className:"chatbot-wrapper",children:[Object(a.jsx)(te,{}),t&&Object(a.jsx)(ne,{href:t})]})}));i.a.render(Object(a.jsx)(o.a,{store:k,children:Object(a.jsx)(ae,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.e3c97c11.chunk.js.map